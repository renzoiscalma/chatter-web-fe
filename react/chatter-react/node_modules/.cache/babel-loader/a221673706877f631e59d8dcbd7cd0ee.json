{"ast":null,"code":"var _jsxFileName = \"/home/xeg/dev/chatter-web/frontend/react/chatter-react/src/components/Chatter/Messages.tsx\",\n    _s = $RefreshSig$();\n\nimport { Box, Paper } from \"@mui/material\";\nimport { useContext, useRef } from \"react\";\nimport SendStatus from \"./interface/SendStatus\";\nimport CheckIcon from \"@mui/icons-material/Check\";\nimport AutorenewIcon from \"@mui/icons-material/Autorenew\";\nimport PriorityHigh from \"@mui/icons-material/PriorityHigh\";\nimport { UserContext } from \"../Layout/Layout\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Messages(_ref) {\n  _s();\n\n  let {\n    messages\n  } = _ref;\n  const messagesContainer = {\n    display: \"flex\",\n    flexDirection: \"column\",\n    overflowY: \"scroll\",\n    height: \"100%\"\n  };\n  const messageBubbleStyle = {\n    textAlign: \"initial\",\n    borderRadius: \"1.15rem\",\n    lineHeight: 1.25,\n    maxWidth: \"75%\",\n    padding: \"0.5rem .875rem\",\n    position: \"relative\",\n    wordWrap: \"break-word\",\n    marginTop: \"2.5px\",\n    marginBottom: \"2.5px\",\n    display: \"inline-flex\",\n    wordBreak: \"break-word\"\n  };\n  const commonTailStyle = {\n    bottom: \"-0.1rem\",\n    content: \"''\",\n    height: \"1rem\",\n    position: \"absolute\"\n  };\n  const tailSelfStyle = {\n    \"&::after\": { ...commonTailStyle,\n      backgroundColor: \"#fff\",\n      borderBottomLeftRadius: \"0.5rem\",\n      right: \"-40px\",\n      transform: \"translate(-30px, -2px)\",\n      width: \"10px\"\n    },\n    \"&::before\": { ...commonTailStyle,\n      borderBottomLeftRadius: \"0.8rem 0.7rem\",\n      borderRight: \"1rem solid #248bf5\",\n      right: \"-0.35rem\",\n      transform: \"translate(0, -0.1rem)\"\n    }\n  };\n  const tailOtherStyle = {\n    \"&::after\": { ...commonTailStyle,\n      backgroundColor: \"#fff\",\n      borderBottomRightRadius: \"0.5rem\",\n      left: \"20px\",\n      transform: \"translate(-30px, -2px)\",\n      width: \"10px\"\n    },\n    \"&::before\": { ...commonTailStyle,\n      borderBottomRightRadius: \"0.8rem 0.7rem\",\n      borderLeft: \"1rem solid #e5e5ea\",\n      left: \"-0.35rem\",\n      transform: \"translate(0, -0.1rem)\"\n    }\n  };\n  const iconStyle = {\n    width: \"12px\",\n    height: \"12px\",\n    alignSelf: \"flex-end\",\n    marginLeft: \"8px\"\n  };\n  const rotateIcon = {\n    animation: \"spin 2s linear infinite\",\n    \"@keyframes spin\": {\n      \"0%\": {\n        transform: \"rotate(0deg)\"\n      },\n      \"100%\": {\n        transform: \"rotate(360deg)\"\n      }\n    }\n  };\n  const nameStyle = {\n    position: \"relative\",\n    fontSize: \"10px\",\n    display: \"block\",\n    marginTop: \"8px\"\n  };\n  const divRef = useRef(null);\n  const userContext = useContext(UserContext);\n\n  const getMessageBubbleStyle = (message, index, messages) => {\n    const nextMessage = messages[index + 1] ? messages[index + 1] : null;\n    const tail = !nextMessage || nextMessage.sender !== message.sender ? true : false;\n    let tailStyle = {};\n    if (tail) tailStyle = message.sender === userContext.userId ? tailSelfStyle : tailOtherStyle;\n    return { ...messageBubbleStyle,\n      ...tailStyle,\n      backgroundColor: message.sender !== userContext.userId ? \"#e5e5ea\" : \"#248bf5\",\n      color: message.sender !== userContext.userId ? \"#000\" : \"#fff\",\n      alignSelf: message.sender !== userContext.userId ? \"flex-start\" : \"flex-end\",\n      marginLeft: message.sender !== userContext.userId ? \"16px\" : \"0px\",\n      marginRight: message.sender !== userContext.userId ? \"0px\" : \"16px\"\n    };\n  };\n\n  const generateMessageStatus = message => {\n    if (message.sender !== userContext.userId) return null;\n\n    if (message.sendStatus === SendStatus.FAILED) {\n      return /*#__PURE__*/_jsxDEV(PriorityHigh, {\n        sx: iconStyle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 14\n      }, this);\n    } else if (message.sendStatus === SendStatus.SENDING) {\n      return /*#__PURE__*/_jsxDEV(AutorenewIcon, {\n        sx: { ...iconStyle,\n          ...rotateIcon\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(CheckIcon, {\n        sx: iconStyle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 14\n      }, this);\n    }\n  };\n\n  const getNameStyle = message => {\n    return { ...nameStyle,\n      alignSelf: message.sender !== userContext.userId ? \"flex-start\" : \"flex-end\",\n      marginLeft: message.sender !== userContext.userId ? \"26px\" : \"\",\n      marginRight: message.sender === userContext.userId ? \"26px\" : \"\"\n    };\n  };\n\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: messagesContainer,\n    children: [messages ? messages.map((value, index, messages) => /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: getNameStyle(value),\n        children: value.senderUsername\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Paper, {\n        sx: getMessageBubbleStyle(value, index, messages),\n        children: [value.message, \" \", generateMessageStatus(value)]\n      }, value.date + \"-\" + index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true)) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"i\", {\n        children: \"crickets\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 11\n      }, this)\n    }, void 0, false), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: divRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 157,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Messages, \"/rEptbitmJ3klvlLBxlLTV4RSKA=\");\n\n_c = Messages;\nexport default Messages;\n\nvar _c;\n\n$RefreshReg$(_c, \"Messages\");","map":{"version":3,"names":["Box","Paper","useContext","useRef","SendStatus","CheckIcon","AutorenewIcon","PriorityHigh","UserContext","Messages","messages","messagesContainer","display","flexDirection","overflowY","height","messageBubbleStyle","textAlign","borderRadius","lineHeight","maxWidth","padding","position","wordWrap","marginTop","marginBottom","wordBreak","commonTailStyle","bottom","content","tailSelfStyle","backgroundColor","borderBottomLeftRadius","right","transform","width","borderRight","tailOtherStyle","borderBottomRightRadius","left","borderLeft","iconStyle","alignSelf","marginLeft","rotateIcon","animation","nameStyle","fontSize","divRef","userContext","getMessageBubbleStyle","message","index","nextMessage","tail","sender","tailStyle","userId","color","marginRight","generateMessageStatus","sendStatus","FAILED","SENDING","getNameStyle","map","value","senderUsername","date"],"sources":["/home/xeg/dev/chatter-web/frontend/react/chatter-react/src/components/Chatter/Messages.tsx"],"sourcesContent":["import { Box, Paper, SxProps } from \"@mui/material\";\nimport Message from \"./interface/Message\";\nimport { useContext, useEffect, useRef } from \"react\";\nimport SendStatus from \"./interface/SendStatus\";\nimport CheckIcon from \"@mui/icons-material/Check\";\nimport AutorenewIcon from \"@mui/icons-material/Autorenew\";\nimport PriorityHigh from \"@mui/icons-material/PriorityHigh\";\nimport { UserContext } from \"../Layout/Layout\";\n\ninterface MessageProps {\n  messages: Message[];\n}\n\nfunction Messages({ messages }: MessageProps): JSX.Element {\n  const messagesContainer: SxProps = {\n    display: \"flex\",\n    flexDirection: \"column\",\n    overflowY: \"scroll\",\n    height: \"100%\",\n  };\n\n  const messageBubbleStyle: SxProps = {\n    textAlign: \"initial\",\n    borderRadius: \"1.15rem\",\n    lineHeight: 1.25,\n    maxWidth: \"75%\",\n    padding: \"0.5rem .875rem\",\n    position: \"relative\",\n    wordWrap: \"break-word\",\n    marginTop: \"2.5px\",\n    marginBottom: \"2.5px\",\n    display: \"inline-flex\",\n    wordBreak: \"break-word\",\n  };\n\n  const commonTailStyle: SxProps = {\n    bottom: \"-0.1rem\",\n    content: \"''\",\n    height: \"1rem\",\n    position: \"absolute\",\n  };\n\n  const tailSelfStyle: SxProps = {\n    \"&::after\": {\n      ...commonTailStyle,\n      backgroundColor: \"#fff\",\n      borderBottomLeftRadius: \"0.5rem\",\n      right: \"-40px\",\n      transform: \"translate(-30px, -2px)\",\n      width: \"10px\",\n    },\n    \"&::before\": {\n      ...commonTailStyle,\n      borderBottomLeftRadius: \"0.8rem 0.7rem\",\n      borderRight: \"1rem solid #248bf5\",\n      right: \"-0.35rem\",\n      transform: \"translate(0, -0.1rem)\",\n    },\n  };\n\n  const tailOtherStyle: SxProps = {\n    \"&::after\": {\n      ...commonTailStyle,\n      backgroundColor: \"#fff\",\n      borderBottomRightRadius: \"0.5rem\",\n      left: \"20px\",\n      transform: \"translate(-30px, -2px)\",\n      width: \"10px\",\n    },\n    \"&::before\": {\n      ...commonTailStyle,\n      borderBottomRightRadius: \"0.8rem 0.7rem\",\n      borderLeft: \"1rem solid #e5e5ea\",\n      left: \"-0.35rem\",\n      transform: \"translate(0, -0.1rem)\",\n    },\n  };\n\n  const iconStyle: SxProps = {\n    width: \"12px\",\n    height: \"12px\",\n    alignSelf: \"flex-end\",\n    marginLeft: \"8px\",\n  };\n\n  const rotateIcon: SxProps = {\n    animation: \"spin 2s linear infinite\",\n    \"@keyframes spin\": {\n      \"0%\": {\n        transform: \"rotate(0deg)\",\n      },\n      \"100%\": {\n        transform: \"rotate(360deg)\",\n      },\n    },\n  };\n\n  const nameStyle: SxProps = {\n    position: \"relative\",\n    fontSize: \"10px\",\n    display: \"block\",\n    marginTop: \"8px\",\n  };\n\n  const divRef = useRef<HTMLDivElement>(null);\n  const userContext = useContext(UserContext);\n\n  const getMessageBubbleStyle = (\n    message: Message,\n    index: number,\n    messages: Message[]\n  ): SxProps => {\n    const nextMessage = messages[index + 1] ? messages[index + 1] : null;\n    const tail: boolean =\n      !nextMessage || nextMessage.sender !== message.sender ? true : false;\n    let tailStyle: SxProps = {} as SxProps;\n    if (tail)\n      tailStyle =\n        message.sender === userContext.userId ? tailSelfStyle : tailOtherStyle;\n    return {\n      ...messageBubbleStyle,\n      ...tailStyle,\n      backgroundColor:\n        message.sender !== userContext.userId ? \"#e5e5ea\" : \"#248bf5\",\n      color: message.sender !== userContext.userId ? \"#000\" : \"#fff\",\n      alignSelf:\n        message.sender !== userContext.userId ? \"flex-start\" : \"flex-end\",\n      marginLeft: message.sender !== userContext.userId ? \"16px\" : \"0px\",\n      marginRight: message.sender !== userContext.userId ? \"0px\" : \"16px\",\n    };\n  };\n\n  const generateMessageStatus = (message: Message): JSX.Element | null => {\n    if (message.sender !== userContext.userId) return null;\n    if (message.sendStatus === SendStatus.FAILED) {\n      return <PriorityHigh sx={iconStyle}></PriorityHigh>;\n    } else if (message.sendStatus === SendStatus.SENDING) {\n      return (\n        <AutorenewIcon sx={{ ...iconStyle, ...rotateIcon }}></AutorenewIcon>\n      );\n    } else {\n      return <CheckIcon sx={iconStyle}></CheckIcon>;\n    }\n  };\n\n  const getNameStyle = (message: Message): SxProps => {\n    return {\n      ...nameStyle,\n      alignSelf:\n        message.sender !== userContext.userId ? \"flex-start\" : \"flex-end\",\n      marginLeft: message.sender !== userContext.userId ? \"26px\" : \"\",\n      marginRight: message.sender === userContext.userId ? \"26px\" : \"\",\n    };\n  };\n\n  return (\n    <Box sx={messagesContainer}>\n      {messages ? (\n        messages.map((value: Message, index: number, messages: Message[]) => (\n          <>\n            <Box sx={getNameStyle(value)}>{value.senderUsername}</Box>\n            <Paper\n              sx={getMessageBubbleStyle(value, index, messages)}\n              key={value.date + \"-\" + index}\n            >\n              {value.message} {generateMessageStatus(value)}\n            </Paper>\n          </>\n        ))\n      ) : (\n        <>\n          <i>crickets</i>\n        </>\n      )}\n      <div ref={divRef} />\n    </Box>\n  );\n}\n\nexport default Messages;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}