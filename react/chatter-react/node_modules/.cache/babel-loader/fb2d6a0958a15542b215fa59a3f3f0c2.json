{"ast":null,"code":"var _jsxFileName = \"/home/xeg/dev/chatter-web/frontend/react/chatter-react/src/components/Layout/Layout.tsx\",\n    _s = $RefreshSig$();\n\nimport Box from '@mui/material/Box';\nimport Video from '../Video/Video';\nimport Chatter from '../Chatter/Chatter';\nimport { createContext, useState, useEffect } from 'react';\nimport { useCookies } from 'react-cookie';\nimport { ADD_NEW_USER } from '../Queries/Lobby';\nimport { useMutation } from '@apollo/client';\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const UserContext = /*#__PURE__*/createContext({\n  username: '',\n  userId: '',\n  lobbyId: '',\n  setUsername: username => {}\n});\n\nfunction Layout() {\n  _s();\n\n  // TODO DECIDE WHAT NEW NAME FOR THIS. BC THIS IS NOT SIMPLY A LAYOUT COMPONENT\n  // todo double check context, should be done when trying to fchange username\n  const [username, setUsername] = useState('');\n  const [userId, setUserId] = useState('');\n  const [lobbyId, setLobbyId] = useState('633c71d566f605851babba3e');\n  const [userCookie, setUserCookie] = useCookies(['user-cookie']);\n\n  const handleSetUsername = username => {\n    setUsername(username);\n  }; // TODO ADD PROPER TYPES\n\n\n  const [newUser, newUserQueryRes] = useMutation(ADD_NEW_USER);\n  useEffect(() => {\n    if (!(userCookie !== null && userCookie !== void 0 && userCookie['user-cookie'])) {\n      newUser();\n    } else {\n      const {\n        userId,\n        username\n      } = userCookie['user-cookie'];\n      setUsername(username);\n      setUserId(userId);\n    }\n  }, []);\n  useEffect(() => {\n    if (newUserQueryRes.data) {\n      let {\n        code,\n        success,\n        user\n      } = newUserQueryRes.data.addNewUser;\n\n      if (code === 200 && success) {\n        setUsername(user.username);\n        setUserId(user.id);\n        setUserCookie('user-cookie', {\n          userId: user.id,\n          username: user.username\n        }, {\n          path: '/',\n          expires: new Date('11-10-2023')\n        });\n      }\n    }\n  }, [newUserQueryRes.data]);\n  if (newUserQueryRes.loading || newUserQueryRes.error) return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: \"LOADING\"\n  }, void 0, false);\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: {\n      username,\n      setUsername: handleSetUsername,\n      userId,\n      lobbyId\n    },\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      sx: gridContainer,\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: videoContainer,\n        children: /*#__PURE__*/_jsxDEV(Video, {\n          videoId: \"rokGy0huYEA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: chatContainer,\n        children: /*#__PURE__*/_jsxDEV(Chatter, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 3\n  }, this);\n}\n\n_s(Layout, \"mrQlvuDBzdigDrDCB8NfCMhA4VY=\", false, function () {\n  return [useCookies, useMutation];\n});\n\n_c = Layout;\nconst border = {\n  borderRadius: '2px',\n  border: '1px solid'\n};\nconst gridContainer = {\n  display: 'inline-grid',\n  columnGap: 1,\n  gridTempateColumns: '3fr 1fr',\n  gridTemplateAreas: `\n\t\t\"video video video chat\"\n\t\t\"video video video chat\"\n\t\t\"video video video chat\"\n\t`\n};\nconst chatContainer = {\n  gridArea: 'chat',\n  width: '29vw',\n  height: 'calc(100vh - 2px)',\n  ...border\n};\nconst videoContainer = {\n  gridArea: 'video',\n  width: '70vw',\n  height: 'calc(100vh - 2px)',\n  ...border\n};\nconst miscContainer = {\n  gridArea: 'misc',\n  width: '28vw',\n  height: '29vh',\n  ...border\n};\nexport default Layout;\n\nvar _c;\n\n$RefreshReg$(_c, \"Layout\");","map":{"version":3,"names":["Box","Video","Chatter","createContext","useState","useEffect","useCookies","ADD_NEW_USER","useMutation","UserContext","username","userId","lobbyId","setUsername","Layout","setUserId","setLobbyId","userCookie","setUserCookie","handleSetUsername","newUser","newUserQueryRes","data","code","success","user","addNewUser","id","path","expires","Date","loading","error","gridContainer","videoContainer","chatContainer","border","borderRadius","display","columnGap","gridTempateColumns","gridTemplateAreas","gridArea","width","height","miscContainer"],"sources":["/home/xeg/dev/chatter-web/frontend/react/chatter-react/src/components/Layout/Layout.tsx"],"sourcesContent":["import Box from '@mui/material/Box';\nimport Video from '../Video/Video';\nimport Chatter from '../Chatter/Chatter';\nimport { SxProps } from '@mui/system';\nimport { createContext, useState, useEffect } from 'react';\nimport { useCookies } from 'react-cookie';\nimport { ADD_NEW_USER } from '../Queries/Lobby';\nimport { MutationTuple, useMutation } from '@apollo/client';\n\nexport const UserContext = createContext({\n\tusername: '',\n\tuserId: '',\n\tlobbyId: '',\n\tsetUsername: (username: string) => {},\n});\n\n\nfunction Layout(): JSX.Element { // TODO DECIDE WHAT NEW NAME FOR THIS. BC THIS IS NOT SIMPLY A LAYOUT COMPONENT\n\t// todo double check context, should be done when trying to fchange username\n\tconst [username, setUsername] = useState<string>('');\n\tconst [userId, setUserId] = useState<string>('');\n\tconst [lobbyId, setLobbyId] = useState<string>('633c71d566f605851babba3e');\n\tconst [userCookie, setUserCookie] = useCookies(['user-cookie']);\n\t\n\tconst handleSetUsername = (username: string) => {\n\t\tsetUsername(username);\n\t}\n\n\t// TODO ADD PROPER TYPES\n\tconst [newUser, newUserQueryRes]: MutationTuple<any, any> = useMutation(ADD_NEW_USER);\n\n\tuseEffect(() => {\n\t\tif (!userCookie?.['user-cookie']) {\n\t\t\tnewUser();\n\t\t} else {\n\t\t\tconst { userId, username } = userCookie['user-cookie'];\n\t\t\tsetUsername(username);\n\t\t\tsetUserId(userId);\n\t\t}\n\t}, [])\n\n\tuseEffect(() => {\n\t\tif(newUserQueryRes.data) {\n\t\t\tlet {code, success, user} = newUserQueryRes.data.addNewUser;\n\t\t\tif (code === 200 && success) {\n\t\t\t\tsetUsername(user.username);\n\t\t\t\tsetUserId(user.id);\n\t\t\t\tsetUserCookie('user-cookie', {userId: user.id, username: user.username}, {\n\t\t\t\t\tpath: '/',\n\t\t\t\t\texpires: new Date('11-10-2023'),\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}, [newUserQueryRes.data])\n\n\tif (newUserQueryRes.loading || newUserQueryRes.error) return <>LOADING</>;\n\treturn (\n\t\t<UserContext.Provider value={{username, setUsername: handleSetUsername, userId, lobbyId}}>\n\t\t\t<Box sx={gridContainer}>\n\t\t\t\t<Box sx={videoContainer}>\n\t\t\t\t\t<Video videoId='rokGy0huYEA'></Video>\n\t\t\t\t</Box>\n\t\t\t\t<Box sx={chatContainer}>\n\t\t\t\t\t<Chatter></Chatter>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t</UserContext.Provider>\n\t)\n}\n\nconst border: SxProps = {\n\tborderRadius: '2px',\n\tborder: '1px solid'\n}\n\nconst gridContainer: SxProps = {\n\tdisplay: 'inline-grid',\n\tcolumnGap: 1,\n\tgridTempateColumns: '3fr 1fr',\n\tgridTemplateAreas: `\n\t\t\"video video video chat\"\n\t\t\"video video video chat\"\n\t\t\"video video video chat\"\n\t`,\n}\n\nconst chatContainer: SxProps = {\n\tgridArea: 'chat',\n\twidth: '29vw',\n\theight: 'calc(100vh - 2px)',\n\t...border\n}\n\nconst videoContainer: SxProps = {\n\tgridArea: 'video',\n\twidth: '70vw',\n\theight: 'calc(100vh - 2px)',\n\t...border\n\n}\n\nconst miscContainer: SxProps = {\n\tgridArea: 'misc',\n\twidth: '28vw',\n\theight: '29vh',\n\t...border\n\n}\n\nexport default Layout;"],"mappings":";;;AAAA,OAAOA,GAAP,MAAgB,mBAAhB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AACA,OAAOC,OAAP,MAAoB,oBAApB;AAEA,SAASC,aAAT,EAAwBC,QAAxB,EAAkCC,SAAlC,QAAmD,OAAnD;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,SAASC,YAAT,QAA6B,kBAA7B;AACA,SAAwBC,WAAxB,QAA2C,gBAA3C;;;AAEA,OAAO,MAAMC,WAAW,gBAAGN,aAAa,CAAC;EACxCO,QAAQ,EAAE,EAD8B;EAExCC,MAAM,EAAE,EAFgC;EAGxCC,OAAO,EAAE,EAH+B;EAIxCC,WAAW,EAAGH,QAAD,IAAsB,CAAE;AAJG,CAAD,CAAjC;;AAQP,SAASI,MAAT,GAA+B;EAAA;;EAAE;EAChC;EACA,MAAM,CAACJ,QAAD,EAAWG,WAAX,IAA0BT,QAAQ,CAAS,EAAT,CAAxC;EACA,MAAM,CAACO,MAAD,EAASI,SAAT,IAAsBX,QAAQ,CAAS,EAAT,CAApC;EACA,MAAM,CAACQ,OAAD,EAAUI,UAAV,IAAwBZ,QAAQ,CAAS,0BAAT,CAAtC;EACA,MAAM,CAACa,UAAD,EAAaC,aAAb,IAA8BZ,UAAU,CAAC,CAAC,aAAD,CAAD,CAA9C;;EAEA,MAAMa,iBAAiB,GAAIT,QAAD,IAAsB;IAC/CG,WAAW,CAACH,QAAD,CAAX;EACA,CAFD,CAP8B,CAW9B;;;EACA,MAAM,CAACU,OAAD,EAAUC,eAAV,IAAsDb,WAAW,CAACD,YAAD,CAAvE;EAEAF,SAAS,CAAC,MAAM;IACf,IAAI,EAACY,UAAD,aAACA,UAAD,eAACA,UAAU,CAAG,aAAH,CAAX,CAAJ,EAAkC;MACjCG,OAAO;IACP,CAFD,MAEO;MACN,MAAM;QAAET,MAAF;QAAUD;MAAV,IAAuBO,UAAU,CAAC,aAAD,CAAvC;MACAJ,WAAW,CAACH,QAAD,CAAX;MACAK,SAAS,CAACJ,MAAD,CAAT;IACA;EACD,CARQ,EAQN,EARM,CAAT;EAUAN,SAAS,CAAC,MAAM;IACf,IAAGgB,eAAe,CAACC,IAAnB,EAAyB;MACxB,IAAI;QAACC,IAAD;QAAOC,OAAP;QAAgBC;MAAhB,IAAwBJ,eAAe,CAACC,IAAhB,CAAqBI,UAAjD;;MACA,IAAIH,IAAI,KAAK,GAAT,IAAgBC,OAApB,EAA6B;QAC5BX,WAAW,CAACY,IAAI,CAACf,QAAN,CAAX;QACAK,SAAS,CAACU,IAAI,CAACE,EAAN,CAAT;QACAT,aAAa,CAAC,aAAD,EAAgB;UAACP,MAAM,EAAEc,IAAI,CAACE,EAAd;UAAkBjB,QAAQ,EAAEe,IAAI,CAACf;QAAjC,CAAhB,EAA4D;UACxEkB,IAAI,EAAE,GADkE;UAExEC,OAAO,EAAE,IAAIC,IAAJ,CAAS,YAAT;QAF+D,CAA5D,CAAb;MAIA;IACD;EACD,CAZQ,EAYN,CAACT,eAAe,CAACC,IAAjB,CAZM,CAAT;EAcA,IAAID,eAAe,CAACU,OAAhB,IAA2BV,eAAe,CAACW,KAA/C,EAAsD,oBAAO;IAAA;EAAA,iBAAP;EACtD,oBACC,QAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAE;MAACtB,QAAD;MAAWG,WAAW,EAAEM,iBAAxB;MAA2CR,MAA3C;MAAmDC;IAAnD,CAA7B;IAAA,uBACC,QAAC,GAAD;MAAK,EAAE,EAAEqB,aAAT;MAAA,wBACC,QAAC,GAAD;QAAK,EAAE,EAAEC,cAAT;QAAA,uBACC,QAAC,KAAD;UAAO,OAAO,EAAC;QAAf;UAAA;UAAA;UAAA;QAAA;MADD;QAAA;QAAA;QAAA;MAAA,QADD,eAIC,QAAC,GAAD;QAAK,EAAE,EAAEC,aAAT;QAAA,uBACC,QAAC,OAAD;UAAA;UAAA;UAAA;QAAA;MADD;QAAA;QAAA;QAAA;MAAA,QAJD;IAAA;MAAA;MAAA;MAAA;IAAA;EADD;IAAA;IAAA;IAAA;EAAA,QADD;AAYA;;GAnDQrB,M;UAK4BR,U,EAOwBE,W;;;KAZpDM,M;AAqDT,MAAMsB,MAAe,GAAG;EACvBC,YAAY,EAAE,KADS;EAEvBD,MAAM,EAAE;AAFe,CAAxB;AAKA,MAAMH,aAAsB,GAAG;EAC9BK,OAAO,EAAE,aADqB;EAE9BC,SAAS,EAAE,CAFmB;EAG9BC,kBAAkB,EAAE,SAHU;EAI9BC,iBAAiB,EAAG;AACrB;AACA;AACA;AACA;AAR+B,CAA/B;AAWA,MAAMN,aAAsB,GAAG;EAC9BO,QAAQ,EAAE,MADoB;EAE9BC,KAAK,EAAE,MAFuB;EAG9BC,MAAM,EAAE,mBAHsB;EAI9B,GAAGR;AAJ2B,CAA/B;AAOA,MAAMF,cAAuB,GAAG;EAC/BQ,QAAQ,EAAE,OADqB;EAE/BC,KAAK,EAAE,MAFwB;EAG/BC,MAAM,EAAE,mBAHuB;EAI/B,GAAGR;AAJ4B,CAAhC;AAQA,MAAMS,aAAsB,GAAG;EAC9BH,QAAQ,EAAE,MADoB;EAE9BC,KAAK,EAAE,MAFuB;EAG9BC,MAAM,EAAE,MAHsB;EAI9B,GAAGR;AAJ2B,CAA/B;AAQA,eAAetB,MAAf"},"metadata":{},"sourceType":"module"}