{"ast":null,"code":"var _jsxFileName = \"/home/xeg/dev/chatter-web/frontend/react/chatter-react/src/components/Layout/Layout.tsx\",\n    _s = $RefreshSig$();\n\nimport Box from \"@mui/material/Box\";\nimport Video from \"../Video/Video\";\nimport Chatter from \"../Chatter/Chatter\";\nimport { createContext, useState, useEffect } from \"react\";\nimport { useCookies } from \"react-cookie\";\nimport { ADD_NEW_USER } from \"../Queries/Lobby\";\nimport { useMutation } from \"@apollo/client\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const UserContext = /*#__PURE__*/createContext({\n  username: \"\",\n  userId: \"\",\n  lobbyId: \"\",\n  setUsername: username => {}\n});\n\nfunction Layout() {\n  _s();\n\n  // TODO DECIDE WHAT NEW NAME FOR THIS. BC THIS IS NOT SIMPLY A LAYOUT COMPONENT\n  // todo double check context, should be done when trying to fchange username\n  const [username, setUsername] = useState(\"\");\n  const [userId, setUserId] = useState(\"\");\n  const [lobbyId, setLobbyId] = useState(\"633c71d566f605851babba3e\");\n  const [userCookie, setUserCookie] = useCookies([\"user-cookie\"]);\n\n  const handleSetUsername = username => {\n    setUsername(username);\n  }; // TODO ADD PROPER TYPES\n\n\n  const [newUser, newUserQueryRes] = useMutation(ADD_NEW_USER);\n  useEffect(() => {\n    if (!(userCookie !== null && userCookie !== void 0 && userCookie[\"user-cookie\"])) {\n      newUser();\n    } else {\n      const {\n        userId,\n        username\n      } = userCookie[\"user-cookie\"];\n      setUsername(username);\n      setUserId(userId);\n    }\n  }, []);\n  useEffect(() => {\n    if (newUserQueryRes.data) {\n      let {\n        code,\n        success,\n        user\n      } = newUserQueryRes.data.addNewUser;\n\n      if (code === 200 && success) {\n        setUsername(user.username);\n        setUserId(user.id);\n        setUserCookie(\"user-cookie\", {\n          userId: user.id,\n          username: user.username\n        }, {\n          path: \"/\",\n          expires: new Date(\"11-10-2023\")\n        });\n      }\n    }\n  }, [newUserQueryRes.data]);\n  if (newUserQueryRes.loading || newUserQueryRes.error) return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: \"LOADING\"\n  }, void 0, false);\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: {\n      username,\n      setUsername: handleSetUsername,\n      userId,\n      lobbyId\n    },\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      sx: gridContainer,\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: videoContainer,\n        children: /*#__PURE__*/_jsxDEV(Video, {\n          videoId: \"rokGy0huYEA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: chatContainer,\n        children: /*#__PURE__*/_jsxDEV(Chatter, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Layout, \"uSW2EqzRvMtLhfboddLlREBsWbM=\", false, function () {\n  return [useCookies, useMutation];\n});\n\n_c = Layout;\nconst border = {\n  borderRadius: \"2px\",\n  border: \"1px solid\"\n};\nconst gridContainer = {\n  display: \"inline-grid\",\n  columnGap: 1,\n  gridTempateColumns: \"3fr 1fr\",\n  gridTemplateAreas: `\n\t\t\"video video video chat\"\n\t\t\"video video video chat\"\n\t\t\"video video video chat\"\n\t`\n};\nconst chatContainer = {\n  gridArea: \"chat\",\n  width: \"29vw\",\n  height: \"calc(100vh - 2px)\",\n  ...border\n};\nconst videoContainer = {\n  gridArea: \"video\",\n  width: \"70vw\",\n  height: \"calc(100vh - 2px)\",\n  ...border\n};\nconst miscContainer = {\n  gridArea: \"misc\",\n  width: \"28vw\",\n  height: \"29vh\",\n  ...border\n};\nexport default Layout;\n\nvar _c;\n\n$RefreshReg$(_c, \"Layout\");","map":{"version":3,"names":["Box","Video","Chatter","createContext","useState","useEffect","useCookies","ADD_NEW_USER","useMutation","UserContext","username","userId","lobbyId","setUsername","Layout","setUserId","setLobbyId","userCookie","setUserCookie","handleSetUsername","newUser","newUserQueryRes","data","code","success","user","addNewUser","id","path","expires","Date","loading","error","gridContainer","videoContainer","chatContainer","border","borderRadius","display","columnGap","gridTempateColumns","gridTemplateAreas","gridArea","width","height","miscContainer"],"sources":["/home/xeg/dev/chatter-web/frontend/react/chatter-react/src/components/Layout/Layout.tsx"],"sourcesContent":["import Box from \"@mui/material/Box\";\nimport Video from \"../Video/Video\";\nimport Chatter from \"../Chatter/Chatter\";\nimport { SxProps } from \"@mui/system\";\nimport { createContext, useState, useEffect } from \"react\";\nimport { useCookies } from \"react-cookie\";\nimport { ADD_NEW_USER } from \"../Queries/Lobby\";\nimport { MutationTuple, useMutation } from \"@apollo/client\";\n\nexport const UserContext = createContext({\n  username: \"\",\n  userId: \"\",\n  lobbyId: \"\",\n  setUsername: (username: string) => {},\n});\n\nfunction Layout(): JSX.Element {\n  // TODO DECIDE WHAT NEW NAME FOR THIS. BC THIS IS NOT SIMPLY A LAYOUT COMPONENT\n  // todo double check context, should be done when trying to fchange username\n  const [username, setUsername] = useState<string>(\"\");\n  const [userId, setUserId] = useState<string>(\"\");\n  const [lobbyId, setLobbyId] = useState<string>(\"633c71d566f605851babba3e\");\n  const [userCookie, setUserCookie] = useCookies([\"user-cookie\"]);\n\n  const handleSetUsername = (username: string) => {\n    setUsername(username);\n  };\n\n  // TODO ADD PROPER TYPES\n  const [newUser, newUserQueryRes]: MutationTuple<any, any> =\n    useMutation(ADD_NEW_USER);\n\n  useEffect(() => {\n    if (!userCookie?.[\"user-cookie\"]) {\n      newUser();\n    } else {\n      const { userId, username } = userCookie[\"user-cookie\"];\n      setUsername(username);\n      setUserId(userId);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (newUserQueryRes.data) {\n      let { code, success, user } = newUserQueryRes.data.addNewUser;\n      if (code === 200 && success) {\n        setUsername(user.username);\n        setUserId(user.id);\n        setUserCookie(\n          \"user-cookie\",\n          { userId: user.id, username: user.username },\n          {\n            path: \"/\",\n            expires: new Date(\"11-10-2023\"),\n          }\n        );\n      }\n    }\n  }, [newUserQueryRes.data]);\n\n  if (newUserQueryRes.loading || newUserQueryRes.error) return <>LOADING</>;\n  return (\n    <UserContext.Provider\n      value={{ username, setUsername: handleSetUsername, userId, lobbyId }}\n    >\n      <Box sx={gridContainer}>\n        <Box sx={videoContainer}>\n          <Video videoId=\"rokGy0huYEA\"></Video>\n        </Box>\n        <Box sx={chatContainer}>\n          <Chatter></Chatter>\n        </Box>\n      </Box>\n    </UserContext.Provider>\n  );\n}\n\nconst border: SxProps = {\n  borderRadius: \"2px\",\n  border: \"1px solid\",\n};\n\nconst gridContainer: SxProps = {\n  display: \"inline-grid\",\n  columnGap: 1,\n  gridTempateColumns: \"3fr 1fr\",\n  gridTemplateAreas: `\n\t\t\"video video video chat\"\n\t\t\"video video video chat\"\n\t\t\"video video video chat\"\n\t`,\n};\n\nconst chatContainer: SxProps = {\n  gridArea: \"chat\",\n  width: \"29vw\",\n  height: \"calc(100vh - 2px)\",\n  ...border,\n};\n\nconst videoContainer: SxProps = {\n  gridArea: \"video\",\n  width: \"70vw\",\n  height: \"calc(100vh - 2px)\",\n  ...border,\n};\n\nconst miscContainer: SxProps = {\n  gridArea: \"misc\",\n  width: \"28vw\",\n  height: \"29vh\",\n  ...border,\n};\n\nexport default Layout;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}